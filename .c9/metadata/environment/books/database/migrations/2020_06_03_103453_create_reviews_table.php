{"filter":false,"title":"2020_06_03_103453_create_reviews_table.php","tooltip":"/books/database/migrations/2020_06_03_103453_create_reviews_table.php","ace":{"folds":[],"scrolltop":152,"scrollleft":0,"selection":{"start":{"row":27,"column":5},"end":{"row":27,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"bef89bc474a704b0d5ebf7ce4f93f5f0ed0ff894","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":17,"column":4},"end":{"row":17,"column":33},"action":"remove","lines":["        $table->timestamps();"],"id":2}],[{"start":{"row":17,"column":4},"end":{"row":18,"column":0},"action":"remove","lines":["",""],"id":3}],[{"start":{"row":16,"column":40},"end":{"row":17,"column":0},"action":"insert","lines":["",""],"id":4},{"start":{"row":17,"column":0},"end":{"row":17,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":17,"column":12},"end":{"row":25,"column":79},"action":"insert","lines":["$table->bigInteger('user_id')->unsigned();","        $table->foreign('user_id')->references('id')->on('users')->onUpdate('cascade')->onDelete('cascade');","        $table->string('title');","        $table->longText('body');","        $table->string('image')->nullable(); //画像投稿しない場合に備えてNULL許可しておく","        $table->tinyInteger('status')->default(1)->comment('0=下書き, 1=アクティブ, 2=削除済み');","        // $table->timestamps()としてしまうと、レコードが作成された日時が入らないので、DB:rawで行う","        $table->timestamp('updated_at')->default(DB::raw('CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP'));","        $table->timestamp('created_at')->default(DB::raw('CURRENT_TIMESTAMP'));"],"id":5}],[{"start":{"row":16,"column":8},"end":{"row":16,"column":12},"action":"remove","lines":["    "],"id":6}],[{"start":{"row":17,"column":8},"end":{"row":17,"column":12},"action":"remove","lines":["    "],"id":7}]]},"timestamp":1591181988516}